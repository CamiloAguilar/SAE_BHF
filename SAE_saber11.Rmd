---
title: "SAE - Estimación de resultados pruebas saber 11 por municipio"
output: 
  html_document:
    theme: united
    highlight: tango
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(dplyr)
library(rlang)
library(sae)
library(survey)
library(nlme)
library(TeachingSampling)
library(stringr)
library(kableExtra)
library(knitr)
options(survey.lonely.psu="adjust")
```

## Abstract

Las pruebas *saber 11* es un examen de carácter obligatorio, el cual es diseñado por el Instituto Colombiano para la Evaluación de la Educación, conocido por las siglas ICFES (de Instituto Colombiano para el Fomento de la Educación Superior), el cual comprueba el grado de desarrollo de las competencias de los estudiantes que están por finalizar el grado undécimo de la Educación Media. Consta de cinco pruebas:

* Lectura crítica
* Matemáticas
* Sociales y ciudadanas
* Ciencias naturales
* Inglés

También hay tres módulos asociados a temáticas y contenidos específicos que los estudiantes pueden presentar de acuerdo a su área de formación profesional.

El objetivo del presente documento es presentar una estimación por muestreo del puntaje medio específico para la asignatura de Matemáticas, por cada municipio del territorio colombiano. Para dicha estimación se hace uso del estimador de Batisse Harter Fuller (BHF), contenido en la libería *sae*. 

Se desea obtener el mejor modelo posible, medido como el de menor coeficiente de variación medio, y que cumpla con las siguientes características para la selección de variables

* $\overline{Y}$ (Variable objetivo) : Puntaje medio matemáticas
* $X_1$ : Puntaje medio en otra asignatura
* $X_2$ : Estrato servicio público
* $X_3$ : Variable asociada al colegio
* $X_4$ : Una variable de libre selección.

<br/><br/>

## Datos de estudio

La población de estudio son los resultados históricos de la prueba para un año particular, aplicada sobre una base de 535254 estudiantes, sobre la cual se ha seleccionado una muestra compleja, de 5556 resultados. A partir de dicha muestra se realizarán las estimaciones para los resultados de cada municipio.

```{r info}
est <- readRDS("./data/estudiantes.rds")
muestra3etapas <- readRDS("./data/muestra3etapas.RDS")
```

## Preparación de los datos

Debido a que la base de datos contiene resultados faltantes, se ha realizado una imputación sobre los mismos; si la variable es categórica, se rellena el faltante con la moda, si es una variable numérica, se rellena con el valor medio de la variable. Un detalle de dicha imputación puede observarse en el script 'competicion.R'. 

En el mismo script, se detalla una necesaria coerción de variables










